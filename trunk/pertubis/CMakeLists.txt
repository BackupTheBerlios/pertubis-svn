PROJECT (PERTUBIS)

# comment out the line below to make the build process more verbose
# SET(CMAKE_VERBOSE_MAKEFILE 1)

CMAKE_MINIMUM_REQUIRED(VERSION 2.4.0)

# SET(CMAKE_BUILD_TYPE Release)

FIND_PACKAGE(Qt4 REQUIRED)

INCLUDE_DIRECTORIES(${QT_INCLUDE_DIR} ${QT_QTCORE_INCLUDE_DIR} ${QT_QTGUI_INCLUDE_DIR})

SET(PERTUBIS_FLAGS $ENV{CXXFLAGS})

MESSAGE("CMAKE_CURRENT_SOURCE_DIR  = ${CMAKE_CURRENT_SOURCE_DIR}")
MESSAGE("PERTUBIS_FLAGS = ${PERTUBIS_FLAGS}")

SET(CMAKE_CXX_FLAGS "${PERTUBIS_FLAGS} -fvisibility=hidden -Wall -Wextra -D_REENTRANT -DQT_SHARED")
SET(CMAKE_CXX_FLAGS_DEBUG "${PERTUBIS_FLAGS} -Wall -Wextra -g -D_REENTRANT -DQT_SHARED")
SET(CMAKE_CXX_FLAGS_MINSIZEREL "${PERTUBIS_FLAGS} -Os -pipe -fvisibility=hidden -Wall -Wextra -D_REENTRANT -DQT_SHARED")
SET(CMAKE_CXX_FLAGS_RELEASE "${PERTUBIS_FLAGS} -fvisibility=hidden -D_REENTRANT -DQT_SHARED -DQT_NO_DEBUG -DQT_NO_DEBUG_OUTPUT")

SET(PERTUBIS_MAJOR_VERSION 0)
SET(PERTUBIS_MINOR_VERSION 0)
SET(PERTUBIS_BUILD_VERSION 1)
SET(PERTUBIS_VERSION "${PERTUBIS_MAJOR_VERSION}.${PERTUBIS_MINOR_VERSION}.${PERTUBIS_BUILD_VERSION}")

EXEC_PROGRAM(/bin/bash "${CMAKE_CURRENT_SOURCE_DIR}/images/picons"
			ARGS "${CMAKE_CURRENT_SOURCE_DIR}/utils/scripts/gen_qresource.sh"
			OUTPUT_VARIABLE	PERTUBIS_RCCS)

CONFIGURE_FILE(src/version.hh.in ${PROJECT_SOURCE_DIR}/src/version.hh @ONLY)

# MESSAGE("PERTUBIS_RCCS = ${PERTUBIS_RCCS}")
# MESSAGE("CMAKE_CURRENT_SOURCE_DIR = ${CMAKE_CURRENT_SOURCE_DIR}")
ADD_SUBDIRECTORY(src)
